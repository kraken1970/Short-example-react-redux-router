{"version":3,"sources":["components/book-list-item/index.jsx","components/bookstore-service-context/index.js","components/hoc/with-bookstore-service.js","actions/index.js","components/spinner/index.jsx","components/error-indicator/index.jsx","components/book-list/index.js","components/shopping-cart-table/index.jsx","components/pages/home-page.jsx","components/pages/cart-page.jsx","components/shopHeader/index.jsx","components/app/index.jsx","components/error-boundry/index.jsx","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["BookListItem","_ref","book","onAddedToCart","title","author","price","coverImage","react_default","a","createElement","className","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","Object","assign","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","Spinner","ErrorIndicator","BookList","books","map","key","id","components_book_list_item","BookListContainer","this","_this$props","loading","error","components_spinner","components_error_indicator","book_list_BookList","Component","connect","_ref2","_ref2$bookList","bookList","ownProps","mapDispatchToProps","onIncrease","onDecrease","onDelete","_ref2$shoppingCart","shoppingCart","items","cartItems","total","orderTotal","item","idx","count","HomePage","components_book_list","components_shopping_cart_table","CartPage","ShopHeader","numItems","react_router_dom","to","App","role","components_shopHeader","react_router","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","arguments","length","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","_ref3","reducer","store","createStore","ReactDOM","render","es","error_boundry_ErrorBoundry","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.638ac7c2.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./book-list-item.css\";\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span className=\"book-title\">{title}</span>\r\n        <div className=\"book-author\">{author}</div>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">\r\n          Add to cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListItem;\r\n","import React from \"react\";\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\r\n","import React from \"react\";\r\nimport { BookstoreServiceConsumer } from \"../bookstore-service-context\";\r\n\r\nconst withBookstoreService = () => Wrapped => {\r\n  return props => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {bookstoreService => {\r\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\r\n        }}\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withBookstoreService;\r\n","const booksLoaded = newBooks => {\r\n  return {\r\n    type: \"FETCH_BOOKS_SUCCESS\",\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: \"FETCH_BOOKS_REQUEST\"\r\n  };\r\n};\r\n\r\nconst booksError = error => {\r\n  return {\r\n    type: \"FETCH_BOOKS_FAILURE\",\r\n    payload: error\r\n  };\r\n};\r\n\r\nexport const bookAddedToCart = bookId => {\r\n  return {\r\n    type: \"BOOK_ADDED_TO_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const bookRemoveFromCart = bookId => {\r\n  return {\r\n    type: \"BOOK_REMOVED_FROM_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const allBooksRemoveFromCart = bookId => {\r\n  return {\r\n    type: \"ALL_BOOKS_REMOVED_FROM_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst fetchBooks = (bookstoreService, dispatch) => () => {\r\n  dispatch(booksRequested());\r\n  bookstoreService\r\n    .getBooks()\r\n    .then(data => {\r\n      dispatch(booksLoaded(data));\r\n    })\r\n    .catch(err => dispatch(booksError(err)));\r\n};\r\n\r\nexport { fetchBooks };\r\n","import React from \"react\";\r\n\r\nimport \"./spinner.css\";\r\n\r\nconst Spinner = () => {\r\n  return <div>loading...</div>;\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\nimport \"./error-indicator.css\";\r\n\r\nconst ErrorIndicator = () => {\r\n  return <div>Error!</div>;\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import React, { Component } from \"react\";\r\nimport BookListItem from \"../book-list-item\";\r\nimport { connect } from \"react-redux\";\r\nimport { withBookstoreService } from \"../hoc\";\r\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\r\nimport Spinner from \"../spinner\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nimport \"./book-list.css\";\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {books.map(book => {\r\n        return (\r\n          <li key={book.id}>\r\n            <BookListItem\r\n              book={book}\r\n              onAddedToCart={() => onAddedToCart(book.id)}\r\n            />\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return {\r\n    books,\r\n    loading,\r\n    error\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  const { bookstoreService } = ownProps;\r\n  return {\r\n    fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n    onAddedToCart: id => dispatch(bookAddedToCart(id))\r\n  };\r\n};\r\n\r\nexport default withBookstoreService()(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(BookListContainer)\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  bookAddedToCart,\r\n  bookRemoveFromCart,\r\n  allBooksRemoveFromCart\r\n} from \"../../actions\";\r\nimport \"./shopping-cart-table.css\";\r\n\r\nconst ShoppingCartTable = ({\r\n  items,\r\n  total,\r\n  onIncrease,\r\n  onDecrease,\r\n  onDelete\r\n}) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>{items.map(renderRow)}</tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">Total: ${total}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n  onDecrease: bookRemoveFromCart,\r\n  onDelete: allBooksRemoveFromCart\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ShoppingCartTable);\r\n","import React from \"react\";\r\nimport BookList from \"../book-list\";\r\nimport ShoppingCartTable from \"../shopping-cart-table\";\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\n\r\nconst CartPage = () => {\r\n  return <div>Cart Page</div>;\r\n};\r\n\r\nexport default CartPage;\r\n","import React from \"react\";\r\nimport \"./shopHeader.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/\">\r\n        <div className=\"logo text-dark\">ReStore</div>\r\n      </Link>\r\n      <Link to=\"/cart\">\r\n        <div className=\"shopping-cart\">\r\n          <i className=\"cart-icon fa fa-shopping-cart\" />\r\n          {numItems} items (${total})\r\n        </div>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default ShopHeader;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { HomePage, CartPage } from \"../pages\";\r\nimport ShopHeader from \"../shopHeader\";\r\nimport \"./app.css\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeader numItems={5} total={210} />\r\n      <Switch>\r\n        <Route path=\"/\" component={HomePage} exact />\r\n        <Route path=\"/cart\" component={CartPage} />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React, { Component } from \"react\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nexport default class ErrorBoundry extends Component {\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","export default class BookstoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: \"Production-Ready Microservices\",\r\n      author: \"Susan J. Fowler\",\r\n      price: 32,\r\n      coverImage:\r\n        \"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg\"\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Release It!\",\r\n      author: \"Michael T. Nygard\",\r\n      price: 45,\r\n      coverImage:\r\n        \"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg\"\r\n    }\r\n  ];\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (Math.random() > 0.75) {\r\n          reject(new Error(\"Something bad happened\"));\r\n        } else {\r\n          resolve(this.data);\r\n        }\r\n      }, 700);\r\n    });\r\n  }\r\n}\r\n","const updateBookList = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"FETCH_BOOKS_REQUEST\":\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n    case \"FETCH_BOOKS_SUCCESS\":\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n    case \"FETCH_BOOKS_FAILURE\":\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload\r\n      };\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [...cartItems, item];\r\n  }\r\n\r\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * book.price\r\n  };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const {\r\n    bookList: { books },\r\n    shoppingCart: { cartItems }\r\n  } = state;\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex]; //если эл-та нет(itemIndex=-1) то item будет undefined\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n  return {\r\n    orderTotal: 0,\r\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n  };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"BOOK_ADDED_TO_CART\":\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case \"BOOK_REMOVED_FROM_CART\":\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case \"ALL_BOOKS_REMOVED_FROM_CART\":\r\n      const item = state.shoppingCart.cartItems.find(\r\n        ({ id }) => id === action.payload\r\n      );\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart'\r\n\r\nconst reducer = (state, action) => {\r\n    return {\r\n      bookList: updateBookList(state, action),\r\n      shoppingCart: updateShoppingCart(state, action)\r\n    }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore } from \"redux\";\r\n\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport App from \"./components/app\";\nimport ErrorBoundry from \"./components/error-boundry\";\nimport BookstoreService from \"./services/bookstore-service\";\nimport { BookstoreServiceProvider } from \"./components/bookstore-service-context\";\n\nimport store from \"./store\";\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}